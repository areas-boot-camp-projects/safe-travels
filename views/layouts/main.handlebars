<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Safe Travels</title>
        {{!-- <link rel="stylesheet" href="/output.css"> --}}
    </head>
    <body>

        {{{ body }}}

    <script>
        // Get COVID data for a city.
        async function getSearchResults(e) {
            e.preventDefault()
            // Get the city and state from the user.
            const city = document.getElementById("city").value
            const state = document.getElementById("state").value
            // Get yesterdayâ€™s date (todo: get today, converted to UTC).
            const now = Date.now()
            const today = new Date(now)
            let yesterday = new Date(today)
            yesterday.setDate(today.getDate() - 1)
            yesterday = yesterday.toISOString().slice(0, 10)
            // If the user entered a city and state, call the API.
            if (city && state) {
                const requestUrl = `/api/covid/united-states/${state}/${city}?date=${yesterday}`
                console.log(requestUrl) // **
                let covidData = await fetch(requestUrl, {
                    method: "GET",
                    headers: { 'Content-Type': 'application/json' },
                })
                covidData = await covidData.json()
                console.log(covidData) // **
            }
        }
        document.getElementById("search-form").addEventListener("submit", getSearchResults)
    </script>
    </body>
</html>